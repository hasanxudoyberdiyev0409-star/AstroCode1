<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Profile</title>
  <link rel="stylesheet" href="style.css">
  <style>
    a{
        text-decoration:none;
        color:#66a1ff;
    }
    .profile-page { max-width:700px; margin:110px auto 60px; background: rgba(255,255,255,0.03); padding:24px; border-radius:12px; box-shadow: 0 6px 30px rgba(0,0,0,0.6); color:#e6eef8; }
    .profile-head { display:flex; gap:16px; align-items:center }
    .profile-avatar { width:96px; height:96px; border-radius:50%; overflow:hidden; flex-shrink:0; border:3px solid rgba(255,255,255,0.06); }
    .profile-avatar img{ width:100%; height:100%; object-fit:cover }
    .profile-meta h1{ font-size:20px; margin-bottom:6px }
    .profile-meta p{ color:#d7dde6 }
    .back-link{ display:inline-block; margin-top:18px; color:#a8c7ff }
  </style>
</head>
<body>
  <main class="profile-page">
    <div class="profile-head">
      <div class="profile-avatar" id="profileAvatar"><img src="" alt="avatar"></div>
      <div class="profile-meta">
        <h1 id="profileName">User</h1>
        <p id="profileEmail">email@example.com</p>
      </div>
    </div>
    <div class="profile-extra">
      <p style="margin-top:16px;color:#cfd8ef">Qo'shimcha ma'lumotlarni keyinchalik qo'shishingiz mumkin.</p>
    </div>
    <a class="back-link" href="/">‚Üê Orqaga</a>
  </main>
  <script>
    function generateAvatar(email, size=160) {
      const seed = encodeURIComponent((email||'').trim().toLowerCase());
      return `https://api.dicebear.com/6.x/identicon/svg?seed=${seed}&size=${size}`;
    }
    (function(){
      const user = (()=>{try{return JSON.parse(localStorage.getItem('user'))}catch(e){return null}})();
      if (user) {
        document.getElementById('profileName').textContent = user.name || 'User';
        document.getElementById('profileEmail').textContent = user.email || '';
        document.querySelector('#profileAvatar img').src = generateAvatar(user.email,200);
      } else {
        // redirect to home if not logged in
        window.location = '/';
      }
    })();
  </script>
</body>
</html>